# API Routes Structure - Visual Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              routes/api.php                                  â”‚
â”‚                           (Main Entry Point)                                 â”‚
â”‚                                                                              â”‚
â”‚  Loads modular route files by domain                                        â”‚
â”‚  + Legacy compatibility routes (health checks)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚ requires
                                     â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                         â”‚
        â†“                    â†“                 â†“                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PUBLIC     â”‚    â”‚  PROSPECTOS  â”‚   â”‚ SEGUIMIENTO  â”‚   â”‚  ACADÃ‰MICO   â”‚
â”‚              â”‚    â”‚              â”‚   â”‚              â”‚   â”‚              â”‚
â”‚  98 lines    â”‚    â”‚  105 lines   â”‚   â”‚   61 lines   â”‚   â”‚  156 lines   â”‚
â”‚              â”‚    â”‚              â”‚   â”‚              â”‚   â”‚              â”‚
â”‚ No Auth âŒ   â”‚    â”‚ Auth âœ…       â”‚   â”‚ Auth âœ…       â”‚   â”‚ Mixed Auth   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚                 â”‚                  â”‚
        â†“                    â†“                 â†“                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FINANCIERO  â”‚    â”‚ ADMINISTRA-  â”‚   â”‚              â”‚   â”‚              â”‚
â”‚              â”‚    â”‚    CIÃ“N      â”‚   â”‚              â”‚   â”‚              â”‚
â”‚  186 lines   â”‚    â”‚  132 lines   â”‚   â”‚              â”‚   â”‚              â”‚
â”‚              â”‚    â”‚              â”‚   â”‚              â”‚   â”‚              â”‚
â”‚ Auth âœ…       â”‚    â”‚ Auth âœ…       â”‚   â”‚              â”‚   â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TOTAL: 821 lines (vs 719 in original single file)
```

## Domain Breakdown

### ğŸŒ PUBLIC (routes/api/public.php)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Health Check (/health)            â”‚
â”‚ â€¢ Login (/login)                    â”‚
â”‚ â€¢ Inscriptions & Payment Plans      â”‚
â”‚ â€¢ Public Prospect Info              â”‚
â”‚ â€¢ Email Sending                     â”‚
â”‚ â€¢ Admin Reports (public endpoints)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ‘¥ PROSPECTOS (routes/api/prospectos.php)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ CRUD Operations                   â”‚
â”‚ â€¢ Bulk Operations                   â”‚
â”‚ â€¢ Status Filtering                  â”‚
â”‚ â€¢ Documents Management              â”‚
â”‚ â€¢ Import/Export                     â”‚
â”‚ â€¢ Column Configuration              â”‚
â”‚ â€¢ Contacts & Communication          â”‚
â”‚ â€¢ Duplicate Detection               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“… SEGUIMIENTO (routes/api/seguimiento.php)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Citas (Appointments)              â”‚
â”‚ â€¢ Interacciones (Interactions)      â”‚
â”‚ â€¢ Tareas (Tasks)                    â”‚
â”‚ â€¢ Actividades (Activities)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ ACADÃ‰MICO (routes/api/academico.php)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Programs (Public)                 â”‚
â”‚ â€¢ Locations & Prices (Public)       â”‚
â”‚ â€¢ Convenios (Public)                â”‚
â”‚ â€¢ Enrollment Periods (Public)       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ â€¢ Courses (Protected)               â”‚
â”‚ â€¢ Student Programs (Protected)      â”‚
â”‚ â€¢ Student Import (Protected)        â”‚
â”‚ â€¢ Rankings (Protected)              â”‚
â”‚ â€¢ Moodle Integration (Protected)    â”‚
â”‚ â€¢ Approval Flows (Protected)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’° FINANCIERO (routes/api/financiero.php)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Dashboard                         â”‚
â”‚ â€¢ Invoices                          â”‚
â”‚ â€¢ Payments                          â”‚
â”‚ â€¢ Payment Rules & Notifications     â”‚
â”‚ â€¢ Blocking Rules                    â”‚
â”‚ â€¢ Payment Gateways                  â”‚
â”‚ â€¢ Exception Categories              â”‚
â”‚ â€¢ Financial Reports                 â”‚
â”‚ â€¢ Reconciliation (EN & ES)          â”‚
â”‚ â€¢ Collection Logs                   â”‚
â”‚ â€¢ Collections Management            â”‚
â”‚ â€¢ Kardex & Installments             â”‚
â”‚ â€¢ Student Payment Portal            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ” ADMINISTRACIÃ“N (routes/api/administracion.php)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Current User & Logout             â”‚
â”‚ â€¢ Users Management                  â”‚
â”‚ â€¢ Roles Management                  â”‚
â”‚ â€¢ Permissions                       â”‚
â”‚ â€¢ Modules & Views                   â”‚
â”‚ â€¢ User Permissions                  â”‚
â”‚ â€¢ Sessions Management               â”‚
â”‚ â€¢ Commissions                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Route Flow Example

### Creating a Prospect with Documents

```
Frontend Request
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST         â”‚
â”‚ /prospectos  â”‚ â”€â”€â†’ routes/api.php â”€â”€â†’ routes/api/prospectos.php
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
                                              â†“
                                    ProspectoController::store()
                                              â”‚
                                              â†“
                                         Database
```

### Student Payment Flow

```
Frontend Request
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET                         â”‚
â”‚ /estudiante/pagos/pendientesâ”‚ â”€â”€â†’ routes/api.php â”€â”€â†’ routes/api/financiero.php
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
                                                             â†“
                                              EstudiantePagosController::pagosPendientes()
                                                             â”‚
                                                             â†“
                                                        Database
```

## Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /login â”‚ â”€â”€â†’ routes/api/public.php (No Auth)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                             â†“
                  LoginController::login()
                             â”‚
                             â†“
                   Returns JWT/Sanctum Token
                             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                                              â”‚
      â†“                                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Protected   â”‚                              â”‚ Protected   â”‚
â”‚ Routes in:  â”‚                              â”‚ Routes in:  â”‚
â”‚             â”‚                              â”‚             â”‚
â”‚ â€¢ prospectosâ”‚                              â”‚ â€¢ financieroâ”‚
â”‚ â€¢ academico â”‚                              â”‚ â€¢ admin     â”‚
â”‚ â€¢ seguimientoâ”‚                             â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Benefits Visualization

### Before (Single File)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      routes/api.php            â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 719 lines of mixed       â”‚ â”‚
â”‚  â”‚ routes, hard to navigate â”‚ â”‚
â”‚  â”‚ â€¢ Public routes          â”‚ â”‚
â”‚  â”‚ â€¢ Protected routes       â”‚ â”‚
â”‚  â”‚ â€¢ Duplicates             â”‚ â”‚
â”‚  â”‚ â€¢ Inconsistent naming    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### After (Modular)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Public   â”‚  â”‚Prospectosâ”‚  â”‚Seguimien-â”‚  â”‚AcadÃ©mico â”‚
â”‚ 98 lines â”‚  â”‚105 lines â”‚  â”‚to 61 lin.â”‚  â”‚156 lines â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Financieroâ”‚  â”‚Administraâ”‚
â”‚186 lines â”‚  â”‚ciÃ³n 132  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… Easy to navigate
âœ… Clear organization
âœ… Maintainable
âœ… Documented
```

## Statistics

| Metric | Before | After | Change |
|--------|--------|-------|--------|
| Total Files | 1 | 7 | +6 ğŸ“ |
| Total Lines | 719 | 821 | +102 lines |
| Avg Lines/File | 719 | 117 | -602 lines |
| Documentation | Minimal | Comprehensive | â¬†ï¸â¬†ï¸â¬†ï¸ |
| Organization | Poor | Excellent | â¬†ï¸â¬†ï¸â¬†ï¸ |
| Maintainability | Low | High | â¬†ï¸â¬†ï¸â¬†ï¸ |

## Summary

âœ… **Modular**: 6 domain-specific files
âœ… **Organized**: Clear separation by business domain  
âœ… **Documented**: Inline comments and comprehensive docs
âœ… **Compatible**: 100% backward compatible
âœ… **Maintainable**: Easy to find and modify routes
âœ… **Scalable**: Easy to add new routes
